{"id":"itv-slides-formatter-0vj","title":"Fix config.gs SpreadsheetApp references","description":"config.gs uses SpreadsheetApp.getActiveSpreadsheet() for settings persistence (lines 224-246). These calls fail silently in Slides context. Settings don't persist between sessions.\n\n**Acceptance criteria:**\n- [ ] Replace SpreadsheetApp calls with PropertiesService (user/document properties)\n- [ ] Settings persist per-presentation\n- [ ] Test: Change setting, close/reopen, setting retained","status":"open","priority":2,"issue_type":"bug","owner":"spm1001@users.noreply.github.com","created_at":"2026-01-17T00:10:30.964511Z","created_by":"spm1001","updated_at":"2026-01-17T00:10:30.964511Z"}
{"id":"itv-slides-formatter-45s","title":"Clean up test functions in main.gs","description":"main.gs has accumulated test functions:\n- testFontSwap()\n- testColorReadAndChange()\n- testReadMaster()\n- testCreateGridSlide()\n- enumerateSlide()\n- enumerateSlide2()\n\nConsider: namespace them (test_*), move to separate test.gs, or document which are one-off explorations vs ongoing tests.","status":"open","priority":3,"issue_type":"task","owner":"spm1001@users.noreply.github.com","created_at":"2026-01-16T20:26:35.996268Z","created_by":"spm1001","updated_at":"2026-01-16T20:26:35.996268Z","dependencies":[{"issue_id":"itv-slides-formatter-45s","depends_on_id":"itv-slides-formatter-9yi","type":"parent-child","created_at":"2026-01-16T22:07:25.724484Z","created_by":"spm1001"}]}
{"id":"itv-slides-formatter-511","title":"Test writing to theme color palette","description":"We proved we can READ the theme palette (colorScheme.colors) and SET elements to use theme references ({themeColor: \"ACCENT1\"}).\n\nOpen question: Can we MODIFY what ACCENT1 means in the master? If so, all elements using that reference would update automatically.\n\nTest: updatePageProperties or similar to change colorScheme values.","status":"open","priority":3,"issue_type":"task","owner":"spm1001@users.noreply.github.com","created_at":"2026-01-16T20:26:28.85828Z","created_by":"spm1001","updated_at":"2026-01-16T20:26:28.85828Z","dependencies":[{"issue_id":"itv-slides-formatter-511","depends_on_id":"itv-slides-formatter-9yi","type":"parent-child","created_at":"2026-01-16T22:07:25.644595Z","created_by":"spm1001"}]}
{"id":"itv-slides-formatter-5ju","title":"Decouple auth and configure scopes","description":"Decouple from mcp-google-workspace token and configure correct OAuth scopes.\n\n**Acceptance criteria:**\n- [x] Update deploy.json to use local ./credentials.json and ./token.json\n- [x] Update package.json auth scripts to use itv-appscript auth (shows GCP project number)\n- [ ] Keep existing scopes: presentations, drive, spreadsheets (needed for linked charts)\n- [ ] Add Apps Script deployment scopes: script.projects, script.deployments\n- [ ] Auth with itv-google-auth to get fresh token with correct scopes\n- [ ] Test: itv-appscript deploy and itv-appscript run both work\n- [ ] Document the change in CLAUDE.md\n\n**Progress:** deploy.json and package.json updated (2026-01-16). Next: run itv-appscript auth to generate local token.","status":"closed","priority":2,"issue_type":"task","owner":"spm1001@users.noreply.github.com","created_at":"2026-01-16T20:26:21.283277Z","created_by":"spm1001","updated_at":"2026-01-16T22:44:54.405709Z","closed_at":"2026-01-16T22:44:54.405709Z","close_reason":"Auth decoupled: local credentials.json and token.json from itv-mit-slides-formatter GCP project. Both deploy and run now work. CLAUDE.md updated.","dependencies":[{"issue_id":"itv-slides-formatter-5ju","depends_on_id":"itv-slides-formatter-bzd","type":"parent-child","created_at":"2026-01-16T21:42:04.732027Z","created_by":"spm1001"}]}
{"id":"itv-slides-formatter-9yi","title":"Formatter does useful things to presentations","description":"The actual formatting functionality - what rules to apply, what to change, how to transform presentations. Distinct from infrastructure (auth, deployment, distribution).","status":"open","priority":2,"issue_type":"epic","owner":"spm1001@users.noreply.github.com","created_at":"2026-01-16T22:07:16.556096Z","created_by":"spm1001","updated_at":"2026-01-16T22:07:16.556096Z"}
{"id":"itv-slides-formatter-bzd","title":"Auth Rationalization","description":"Untangle auth so itv-slides-formatter has its own minimal-scope token, with proper service account for production deployment.\n\n**Current state:** Uses mcp-google-workspace token (15+ scopes), creating scope creep and tangled dependencies.\n\n**Target state:**\n- Own token.json with appropriate scopes (presentations, drive, spreadsheets, script.*)\n- GCP project stays separate (itv-mit-slides-formatter)\n- Service account for production deployment\n- GitHub Actions CI/CD for production deploys\n- ~20 users can install via shared URL\n\nSee plan: ~/.claude/plans/spicy-growing-sprout.md","status":"open","priority":1,"issue_type":"epic","owner":"spm1001@users.noreply.github.com","created_at":"2026-01-16T21:41:54.350104Z","created_by":"spm1001","updated_at":"2026-01-16T21:41:54.350104Z"}
{"id":"itv-slides-formatter-bzd.1","title":"Create GCP service account for production","description":"Set up a service account for production deployments.\n\n**Acceptance criteria:**\n- [ ] Create service account in itv-mit-slides-formatter GCP project\n- [ ] Grant minimal roles (Apps Script API, Slides API)\n- [ ] Download service account key JSON\n- [ ] Store in GitHub Secrets as GOOGLE_SA_KEY\n- [ ] Optional: Store locally in ~/.credentials/ for manual production deploys","notes":"## Blocked: Service accounts don't work with Apps Script\n\n**Discovery (Jan 2026):** Apps Script API requires user context. Service accounts can't own or deploy to Apps Script projects without domain-wide delegation.\n\n**Options explored:**\n- Service Account Token Creator role — doesn't help, wrong use case\n- Direct service account — can't own Apps Script projects\n\n**Path forward:** Either:\n1. Domain-wide delegation (needs Workspace admin)\n2. Shared user account (mit-slides-tools@itv.com) — simpler, see DISTRIBUTION.md\n\nParking this pending delegation setup or pivot to shared account approach.","status":"closed","priority":2,"issue_type":"task","owner":"spm1001@users.noreply.github.com","created_at":"2026-01-16T21:42:26.458715Z","created_by":"spm1001","updated_at":"2026-01-16T23:14:03.89644Z","closed_at":"2026-01-16T23:14:03.89644Z","close_reason":"Pivoted to shared account (measurement@itv.com) instead. Service accounts can't own Apps Script projects without domain-wide delegation. Shared account setup complete - see DISTRIBUTION.md.","dependencies":[{"issue_id":"itv-slides-formatter-bzd.1","depends_on_id":"itv-slides-formatter-bzd","type":"parent-child","created_at":"2026-01-16T21:42:26.459311Z","created_by":"spm1001"}]}
{"id":"itv-slides-formatter-bzd.2","title":"Configure production deployment with CI/CD","description":"Set up production Apps Script project and GitHub Actions for automated deployment.\n\n**Acceptance criteria:**\n- [ ] Create production Apps Script project (share with service account as Editor)\n- [ ] Create deploy.production.json pointing to service account credentials\n- [ ] Create GitHub Actions workflow for production deploy on merge to main\n- [ ] Document manual production deploy workflow (fallback)\n- [ ] Test: Push to main triggers deploy to production","status":"open","priority":2,"issue_type":"task","owner":"spm1001@users.noreply.github.com","created_at":"2026-01-16T21:42:27.690012Z","created_by":"spm1001","updated_at":"2026-01-16T21:42:27.690012Z","dependencies":[{"issue_id":"itv-slides-formatter-bzd.2","depends_on_id":"itv-slides-formatter-bzd","type":"parent-child","created_at":"2026-01-16T21:42:27.690673Z","created_by":"spm1001"},{"issue_id":"itv-slides-formatter-bzd.2","depends_on_id":"itv-slides-formatter-bzd.1","type":"blocks","created_at":"2026-01-16T21:42:39.22267Z","created_by":"spm1001"}]}
{"id":"itv-slides-formatter-bzd.3","title":"Set up user installation flow","description":"Enable ~20 users to install the add-on and receive automatic updates.\n\n**Acceptance criteria:**\n- [ ] Create versioned add-on deployment in production project\n- [ ] Document install URL for users\n- [ ] Test: Fresh user can install and use add-on\n- [ ] Verify updates propagate automatically when new version is created","status":"closed","priority":2,"issue_type":"task","owner":"spm1001@users.noreply.github.com","created_at":"2026-01-16T21:42:28.946329Z","created_by":"spm1001","updated_at":"2026-01-17T00:03:50.95182Z","closed_at":"2026-01-17T00:03:50.95182Z","close_reason":"User installation flow working. Test deployment via Editor access. Fixed: SpreadsheetApp→SlidesApp, HtmlService.createHtml→createHtmlOutput, added script.container.ui scope. UX polish needed (auto-detect presentation, Marketplace for non-editor users).","dependencies":[{"issue_id":"itv-slides-formatter-bzd.3","depends_on_id":"itv-slides-formatter-bzd","type":"parent-child","created_at":"2026-01-16T21:42:28.947093Z","created_by":"spm1001"},{"issue_id":"itv-slides-formatter-bzd.3","depends_on_id":"itv-slides-formatter-bzd.2","type":"blocks","created_at":"2026-01-16T21:42:39.298666Z","created_by":"spm1001"}]}
{"id":"itv-slides-formatter-oxh","title":"Get designer input on shopping list","description":"Created docs/DESIGNER_SHOPPING_LIST.md with all properties designers need to specify. Waiting for actual ITV designed template before sending to designers. See Appendix C for goblin census.","notes":"2026-01-16: Test artifacts confirmed deleted.\n\nSession learnings:\n- Proved color read/write works (RGB and theme references)\n- Can read full master template: colorScheme, placeholders, layouts\n- Created grid illustration slides (16×9, 32×18, 80×45)\n- Grid recommendation: 114,300 EMU = 80×45 = ⅛\" cells\n\nRemote execution blocked by GCP project mismatch (see CLAUDE.md Known Issues).\nStill waiting for ITV designed template from designers.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-10T22:40:06.48829Z","created_by":"modha","updated_at":"2026-01-16T20:26:11.474826Z","dependencies":[{"issue_id":"itv-slides-formatter-oxh","depends_on_id":"itv-slides-formatter-9yi","type":"parent-child","created_at":"2026-01-16T22:07:25.557723Z","created_by":"spm1001"}]}
{"id":"itv-slides-formatter-x5g","title":"Publish to Google Workspace Marketplace (private)","description":"For non-developer users to install without Editor access to the Apps Script project.\n\n**Context:** Test deployment requires Editor access. Marketplace publishing enables Extensions → Add-ons → Get add-ons installation for any ITV user.\n\n**Acceptance criteria:**\n- [ ] Configure add-on manifest for Marketplace\n- [ ] Submit for private publishing (ITV domain only)\n- [ ] Test: User without Editor access can install via Marketplace\n- [ ] Update DISTRIBUTION.md with install instructions","status":"open","priority":3,"issue_type":"task","owner":"spm1001@users.noreply.github.com","created_at":"2026-01-17T00:10:37.584824Z","created_by":"spm1001","updated_at":"2026-01-17T00:10:37.584824Z"}
{"id":"itv-slides-formatter-ypk","title":"Set up colleague dev workflow","description":"Set up colleague dev workflow so teammates can independently develop and test.\n\n**Acceptance criteria:**\n- [ ] Create deploy.json.template showing structure (gitignored deploy.json, not template)\n- [ ] Update docs/DISTRIBUTION.md with credential sharing instructions\n- [ ] Document: clone → get credentials.json → auth → deploy to sandbox\n- [ ] Share credentials.json with colleague via secure channel\n- [ ] Test: Colleague can set up and deploy independently","status":"open","priority":2,"issue_type":"task","owner":"spm1001@users.noreply.github.com","created_at":"2026-01-16T20:26:43.720374Z","created_by":"spm1001","updated_at":"2026-01-16T21:42:13.446019Z","dependencies":[{"issue_id":"itv-slides-formatter-ypk","depends_on_id":"itv-slides-formatter-bzd","type":"parent-child","created_at":"2026-01-16T21:42:13.447748Z","created_by":"spm1001"},{"issue_id":"itv-slides-formatter-ypk","depends_on_id":"itv-slides-formatter-5ju","type":"blocks","created_at":"2026-01-16T21:42:39.146479Z","created_by":"spm1001"}]}
